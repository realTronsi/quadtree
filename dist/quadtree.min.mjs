var t={d:(h,e)=>{for(var i in e)t.o(e,i)&&!t.o(h,i)&&Object.defineProperty(h,i,{enumerable:!0,get:e[i]})},o:(t,h)=>Object.prototype.hasOwnProperty.call(t,h)},h={};function e(t,h,e,i,n,s,r){this.x1=t,this.y1=h,this.x2=e,this.y2=i,this.mx=t+(e-t)/2,this.my=h+(i-h)/2,this.maxChildren=n,this.depth=s,this.parent=r,this.children=[],this.nodes=[]}t.d(h,{l:()=>e}),e.prototype.getBoundQuadrant=function(t){if(0===this.nodes.length)return-1;if(t.y2<this.my&&t.y1>this.y1){if(t.x2<this.mx&&t.x1>this.x1)return 0;if(t.x1>this.my&&t.x2<this.x2)return 1}if(t.y1>this.my&&t.y2<this.y2){if(t.x2<this.mx&&t.x1>this.x1)return 2;if(t.x1>this.my&&t.x2<this.x2)return 3}return-1},e.prototype.push=function(t){const h=this.getBoundQuadrant(t._qtree_bbox);if(-1!==h)return this.nodes[h].push(t);if(this.children.push(t),t._qtree_node=this,0!==this.nodes.length||0===this.depth||this.children.length<=this.maxChildren)return;this.nodes=[new e(this.x1,this.y1,this.mx,this.my,this.maxChildren,this.depth-1,this),new e(this.mx,this.y1,this.x2,this.my,this.maxChildren,this.depth-1,this),new e(this.x1,this.my,this.mx,this.y2,this.maxChildren,this.depth-1,this),new e(this.mx,this.my,this.x2,this.y2,this.maxChildren,this.depth-1,this)];const i=this.children;let n=i.length,s=n;for(;--n;){const t=i[n],h=this.getBoundQuadrant(t._qtree_bbox);if(-1!==h){this.nodes[h].push(t),s--;let e=n;for(;e<s;)i[e]=i[++e];i.pop()}}},e.prototype.remove=function(t){const h=t._qtree_node.children,e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),0===this.nodes.length&&this.parent.clean()},e.prototype.clean=function(){const t=this.nodes;t[0].children.length>0||t[1].children.length>0||t[2].children.length>0||t[3].children.length>0||(this.nodes=[],this.parent.clean())},e.prototype.removePreserve=function(t){const h=t._qtree_node.children;let e=h.indexOf(t);if(h[e]=h[h.length-1],h.pop(),0!==this.nodes.length)return;const i=this.nodes;if(i[0].children.length+i[1].children.length+i[2].children.length+i[3].children.length<=this.maxChildren)return;const n=i[0].children;for(e=n.length;--e;)this.children.push(n[e]);const s=i[1].children;for(e=s.length;--e;)this.children.push(s[e]);const r=i[2].children;for(e=r.length;--e;)this.children.push(r[e]);const o=i[3].children;for(e=o.length;--e;)this.children.push(o[e]);this.nodes=[]},e.prototype.query=function(t,h,e,i,n){if(function(t,h,e,i,n,s,r,o){return r<t||n>e||o<h||s>i}(this.x1,this.y1,this.x2,this.y2,t,h,e,i))return;const s=this.children,r=this.nodes;let o=s.length;for(;o--;)if(n(s[o]))return;0!==r.length&&(r[0].query(t,h,e,i,n),r[1].query(t,h,e,i,n),r[2].query(t,h,e,i,n),r[3].query(t,h,e,i,n))},e.prototype.clear=function(){this.children=[],this.nodes=[]};var i=h.l;export{i as Quadtree};